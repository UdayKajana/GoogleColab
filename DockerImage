FROM ubuntu:20.04
RUN apt-get update && apt-get install -y openjdk-11-jdk python3.8 python3-pip


# Use a lightweight base image
FROM debian:bullseye-slim

# Install basic dependencies
RUN apt-get update && apt-get install -y wget tar curl unzip gnupg && \
    rm -rf /var/lib/apt/lists/*

# Install Java 11 manually
RUN wget https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.tar.gz -O /tmp/jdk.tar.gz && \
    mkdir /opt/java && \
    tar -xzf /tmp/jdk.tar.gz -C /opt/java --strip-components=1 && \
    rm /tmp/jdk.tar.gz && \
    ln -s /opt/java/bin/java /usr/bin/java && \
    java -version

# Install Python 3.8 manually
RUN wget https://www.python.org/ftp/python/3.8.17/Python-3.8.17.tgz -O /tmp/python.tgz && \
    tar -xzf /tmp/python.tgz -C /tmp && \
    cd /tmp/Python-3.8.17 && \
    ./configure --enable-optimizations && \
    make -j$(nproc) && \
    make install && \
    rm -rf /tmp/Python-3.8.17 /tmp/python.tgz && \
    python3.8 --version

# Set the working directory
WORKDIR /app

# Copy application files
COPY . /app

# Default command
CMD ["bash"]
